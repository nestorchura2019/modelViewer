<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Model-viewer Course</title>
    <meta name="description" content="Examples " />
    <meta name="author" content="Me" />

    <meta property="og:title" content="Model-viewer" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://" />
    <meta property="og:description" content="Examples" />
    <meta property="og:image" content="image.png" />

    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="../assets/favicon/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32 "
      href="../assets/favicon/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="../assets/favicon/favicon-16x16.png"
    />
    <link rel="manifest" href="../assets/favicon/site.webmanifest" />

    <link rel="stylesheet" href="../css/styles.css" />

    <style>
      model-viewer {
        width: 400px;
        height: 600px;
        margin: 0 auto;
      }
      .controls {
        background-color: white;
        border-radius: 4px;
        border: none;
        /* position: absolute;
          top: 16px;
          right: 16px; */
      }
    </style>
  </head>

  <body>
    <!-- Import the component -->
    <script
      type="module"
      src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.0.1/model-viewer.min.js"
    ></script>

    <model-viewer
      id="knight"
      src="../assets/knightNoCubeNes.glb"
      alt="A 3D model of a cartoon animated knight"
      ar
      ar-modes="webxr scene-viewer quick-look"
      environment-image="neutral"
      animation-name="NesAnim"
      autoplay
      camera-controls
    >
      <div class="controls" ,="" id="anim-controls">
        <button data-anim="Look Around">look around</button>
        <button data-anim="Die">Die</button>
        <button data-anim="Dance">Dance</button>
      </div>
    </model-viewer>

    <script>
      let nro = 0;
      const modelViewer = document.querySelector("model-viewer#knight");

      modelViewer.addEventListener("load", (ev) => {
        console.log(modelViewer.availableAnimations);
        //modelViewer.play({repetitions:1});
      });

      modelViewer.addEventListener("loop", (ev) => {
        // nro = modelViewer.animationName === "Die" ? 2 : 1;
        console.log("nro " + nro + " the animation is looping");
        // if (nro == 1) {
        //   modelViewer.animationName = "Die";

        // }
        if (modelViewer.animationName != "Walking") {
          //modelViewer.pause();
          modelViewer.animationName = "Walking";
          console.log("pause");
        }
      });
      // modelViewer.addEventListener("finished", (ev) => {
      //   console.log("animacion finalizada");
      // });
      document
        .querySelector("#anim-controls")
        .addEventListener("click", (event) => {
          const anim = event.target.dataset.anim;
          console.log("clic aniNes");
          modelViewer.animationName = anim;
          modelViewer.play({ repetitions: 1 });

          console.log(anim + " clic");

          console.log("nro igual a " + nro);
        });
    </script>
  </body>
</html>

